name: Quick TikTok Download

on:
  workflow_dispatch:
    inputs:
      tiktok_url:
        description: 'TikTok URL to download'
        required: true
        default: 'https://www.tiktok.com/@qawwli.lovers1'

jobs:
  download:
    runs-on: ubuntu-latest
    
    steps:
    - name: Download and zip
      run: |
        # Install tools
        sudo apt-get update
        sudo apt-get install -y ffmpeg python3-pip zip
        pip install yt-dlp
        
        # Download videos
        echo "ğŸ“¥ Downloading from: ${{ github.event.inputs.tiktok_url }}"
        yt-dlp -f "best[ext=mp4]" -o "videos/%(title)s.%(ext)s" "${{ github.event.inputs.tiktok_url }}"
        
        # Create zip
        zip -r download.zip videos/
        
        # Show results
        echo "âœ… Download complete!"
        echo "ğŸ“ Files downloaded: $(find videos -name '*.mp4' | wc -l)"
        echo "ğŸ“¦ Zip size: $(du -h download.zip | cut -f1)"

    - name: Upload results
      uses: actions/upload-artifact@v4
      with:
        name: tiktok-videos
        path: download.zip
